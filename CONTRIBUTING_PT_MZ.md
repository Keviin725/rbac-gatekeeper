# Guia de Contribui√ß√£o - Sistema RBAC üá≤üáø

## Bem-vindo √† Comunidade!

Obrigado pelo seu interesse em contribuir para o sistema RBAC! Este guia foi criado especificamente para desenvolvedores mo√ßambicanos e da comunidade lus√≥fona.

## √çndice

1. [Como Contribuir](#como-contribuir)
2. [Configura√ß√£o do Ambiente](#configura√ß√£o-do-ambiente)
3. [Padr√µes de C√≥digo](#padr√µes-de-c√≥digo)
4. [Processo de Pull Request](#processo-de-pull-request)
5. [Reportar Bugs](#reportar-bugs)
6. [Sugerir Funcionalidades](#sugerir-funcionalidades)
7. [Comunidade](#comunidade)

## Como Contribuir

### Tipos de Contribui√ß√£o

#### üêõ **Corre√ß√£o de Bugs**
- Identificar e corrigir problemas existentes
- Melhorar tratamento de erros
- Otimizar performance

#### ‚ú® **Novas Funcionalidades**
- Adicionar novos endpoints da API
- Implementar novos middlewares
- Criar utilit√°rios e helpers

#### üìö **Documenta√ß√£o**
- Melhorar documenta√ß√£o existente
- Criar tutoriais e guias
- Traduzir documenta√ß√£o para portugu√™s

#### üß™ **Testes**
- Adicionar testes unit√°rios
- Criar testes de integra√ß√£o
- Melhorar cobertura de testes

#### üé® **Melhorias de UX/UI**
- Melhorar interface do SDK
- Criar exemplos visuais
- Otimizar experi√™ncia do desenvolvedor

## Configura√ß√£o do Ambiente

### 1. Fork e Clone

```bash
# Fazer fork do reposit√≥rio no GitHub
# Depois clonar o seu fork
git clone https://github.com/SEU_USERNAME/rbac-system.git
cd rbac-system

# Adicionar reposit√≥rio original como upstream
git remote add upstream https://github.com/original/rbac-system.git
```

### 2. Instalar Depend√™ncias

```bash
# Instalar depend√™ncias
yarn install

# Ou com npm
npm install
```

### 3. Configurar Ambiente de Desenvolvimento

```bash
# Copiar ficheiro de ambiente
cp .env.example .env

# Configurar vari√°veis
nano .env
```

```env
# Configura√ß√£o para desenvolvimento
NODE_ENV=development
PORT=3001
DB_TYPE=sqlite
SQLITE_PATH=./database.sqlite
JWT_SECRET=dev-secret-key
JWT_EXPIRES_IN=24h
```

### 4. Inicializar Base de Dados

```bash
# Executar migra√ß√µes
yarn migrate

# Executar seeds
yarn seed

# Verificar se tudo est√° funcionando
yarn test
```

## Padr√µes de C√≥digo

### 1. Conven√ß√µes de Nomenclatura

```typescript
// ‚úÖ BOM: Nomes descritivos em portugu√™s para coment√°rios
/**
 * Verifica se o utilizador tem permiss√£o espec√≠fica
 * @param userId - ID do utilizador
 * @param permission - Permiss√£o a verificar
 */
async verificarPermissao(userId: string, permission: PermissionCheck): Promise<boolean> {
  // Implementa√ß√£o...
}

// ‚ùå MAU: Nomes gen√©ricos
async check(userId: string, perm: any): Promise<boolean> {
  // Implementa√ß√£o...
}
```

### 2. Estrutura de Ficheiros

```
src/
‚îú‚îÄ‚îÄ types/              # Defini√ß√µes de tipos
‚îú‚îÄ‚îÄ database/           # Migra√ß√µes e seeds
‚îú‚îÄ‚îÄ repositories/       # Camada de dados
‚îú‚îÄ‚îÄ services/          # L√≥gica de neg√≥cio
‚îú‚îÄ‚îÄ middleware/        # Middleware de autentica√ß√£o
‚îú‚îÄ‚îÄ controllers/       # Controladores da API
‚îú‚îÄ‚îÄ routes/           # Defini√ß√£o de rotas
‚îú‚îÄ‚îÄ sdk/             # SDK cliente
‚îî‚îÄ‚îÄ utils/           # Utilit√°rios
```

### 3. Coment√°rios e Documenta√ß√£o

```typescript
/**
 * Servi√ßo de autentica√ß√£o e autoriza√ß√£o
 * Implementa l√≥gica RBAC (Role-Based Access Control)
 * 
 * @example
 * ```typescript
 * const rbacService = new RBACService(knex, config);
 * const user = await rbacService.authenticateUser('admin', 'password');
 * ```
 */
export class RBACService {
  /**
   * Autentica utilizador com nome de utilizador e senha
   * @param username - Nome de utilizador
   * @param password - Senha em texto plano
   * @returns Resultado da autentica√ß√£o ou null se inv√°lido
   */
  async authenticateUser(username: string, password: string): Promise<AuthResult | null> {
    // Implementa√ß√£o...
  }
}
```

### 4. Tratamento de Erros

```typescript
// ‚úÖ BOM: Tratamento espec√≠fico de erros
try {
  const user = await this.userRepository.findById(userId);
  if (!user) {
    throw new NotFoundError('Utilizador n√£o encontrado');
  }
  return user;
} catch (error) {
  if (error instanceof NotFoundError) {
    throw error;
  }
  logger.error('Erro ao buscar utilizador:', error);
  throw new InternalServerError('Erro interno do servidor');
}

// ‚ùå MAU: Tratamento gen√©rico
try {
  return await this.userRepository.findById(userId);
} catch (error) {
  throw error; // Re-throw sem contexto
}
```

### 5. Testes

```typescript
// ‚úÖ BOM: Testes descritivos
describe('RBACService', () => {
  describe('autentica√ß√£o de utilizador', () => {
    it('deve autenticar utilizador com credenciais v√°lidas', async () => {
      // Arrange
      const username = 'testuser';
      const password = 'password123';
      
      // Act
      const result = await rbacService.authenticateUser(username, password);
      
      // Assert
      expect(result).toBeDefined();
      expect(result?.user.username).toBe(username);
      expect(result?.token).toBeTruthy();
    });

    it('deve rejeitar utilizador com credenciais inv√°lidas', async () => {
      // Arrange
      const username = 'testuser';
      const password = 'senha_errada';
      
      // Act
      const result = await rbacService.authenticateUser(username, password);
      
      // Assert
      expect(result).toBeNull();
    });
  });
});
```

## Processo de Pull Request

### 1. Criar Branch

```bash
# Atualizar branch principal
git checkout main
git pull upstream main

# Criar nova branch
git checkout -b feature/nova-funcionalidade
# ou
git checkout -b fix/corrigir-bug
# ou
git checkout -b docs/melhorar-documentacao
```

### 2. Desenvolver Funcionalidade

```bash
# Fazer commits pequenos e frequentes
git add .
git commit -m "feat: adiciona valida√ß√£o de email"

# Continuar desenvolvimento
git add .
git commit -m "test: adiciona testes para valida√ß√£o de email"

# Finalizar
git add .
git commit -m "docs: actualiza documenta√ß√£o da API"
```

### 3. Executar Testes

```bash
# Executar todos os testes
yarn test

# Executar testes com cobertura
yarn test:coverage

# Verificar linting
yarn lint

# Verificar formata√ß√£o
yarn format:check
```

### 4. Criar Pull Request

```markdown
## Descri√ß√£o
Breve descri√ß√£o das mudan√ßas implementadas.

## Tipo de Mudan√ßa
- [ ] Bug fix (corre√ß√£o que resolve um problema)
- [ ] Nova funcionalidade (mudan√ßa que adiciona funcionalidade)
- [ ] Breaking change (corre√ß√£o ou funcionalidade que quebra compatibilidade)
- [ ] Documenta√ß√£o (mudan√ßas apenas na documenta√ß√£o)

## Como Testar
1. Passo 1
2. Passo 2
3. Passo 3

## Checklist
- [ ] Meu c√≥digo segue os padr√µes do projecto
- [ ] Realizei uma auto-revis√£o do meu c√≥digo
- [ ] Comentei c√≥digo complexo
- [ ] Actualizei a documenta√ß√£o
- [ ] Adicionei testes que provam que a corre√ß√£o √© eficaz
- [ ] Novos e antigos testes passam localmente
- [ ] Qualquer mudan√ßa dependente foi actualizada

## Screenshots (se aplic√°vel)
Adicionar screenshots para ajudar a explicar o problema.

## Contexto Adicional
Qualquer informa√ß√£o adicional relevante.
```

## Reportar Bugs

### Template de Bug Report

```markdown
**Descri√ß√£o do Bug**
Uma descri√ß√£o clara e concisa do problema.

**Passos para Reproduzir**
1. Ir para '...'
2. Clicar em '...'
3. Ver erro

**Comportamento Esperado**
O que deveria acontecer.

**Comportamento Actual**
O que est√° a acontecer.

**Screenshots**
Se aplic√°vel, adicionar screenshots.

**Ambiente:**
- OS: [ex: Ubuntu 20.04]
- Node.js: [ex: 18.17.0]
- Yarn: [ex: 1.22.19]
- Vers√£o do RBAC: [ex: 1.0.0]

**Informa√ß√µes Adicionais**
Qualquer informa√ß√£o adicional relevante.
```

### Exemplo de Bug Report

```markdown
**Descri√ß√£o do Bug**
O endpoint `/api/users` retorna erro 500 quando o utilizador n√£o tem permiss√£o.

**Passos para Reproduzir**
1. Fazer login como utilizador normal (n√£o admin)
2. Fazer GET request para `/api/users`
3. Ver erro 500 em vez de 403

**Comportamento Esperado**
Deve retornar erro 403 (Forbidden) com mensagem clara.

**Comportamento Actual**
Retorna erro 500 (Internal Server Error).

**Logs de Erro**
```
Error: Cannot read property 'roles' of undefined
    at UserController.listUsers (/app/src/controllers/UserController.ts:45:12)
```

**Ambiente:**
- OS: Ubuntu 20.04 LTS
- Node.js: 18.17.0
- Yarn: 1.22.19
- Vers√£o do RBAC: 1.0.0
```

## Sugerir Funcionalidades

### Template de Feature Request

```markdown
**Funcionalidade Sugerida**
Uma descri√ß√£o clara e concisa da funcionalidade desejada.

**Problema que Resolve**
Que problema esta funcionalidade resolve?

**Solu√ß√£o Proposta**
Como gostaria que funcionasse?

**Alternativas Consideradas**
Outras solu√ß√µes que considerou.

**Contexto Adicional**
Qualquer informa√ß√£o adicional relevante.
```

### Exemplo de Feature Request

```markdown
**Funcionalidade Sugerida**
Adicionar suporte para autentica√ß√£o de dois factores (2FA).

**Problema que Resolve**
Melhora a seguran√ßa do sistema permitindo autentica√ß√£o adicional.

**Solu√ß√£o Proposta**
- Adicionar campo `twoFactorEnabled` na tabela users
- Implementar gera√ß√£o de c√≥digos TOTP
- Adicionar endpoint para activar/desactivar 2FA
- Modificar processo de login para incluir c√≥digo 2FA

**Alternativas Consideradas**
- SMS 2FA (mais complexo, requer integra√ß√£o com provedor)
- Email 2FA (menos seguro)

**Contexto Adicional**
Esta funcionalidade √© especialmente importante para ambientes corporativos em Mo√ßambique.
```

## Comunidade

### Canais de Comunica√ß√£o

#### üí¨ **Discord**
- Servidor: [RBAC Mozambique](https://discord.gg/rbac-mozambique)
- Canais:
  - `#geral` - Discuss√µes gerais
  - `#desenvolvimento` - Ajuda t√©cnica
  - `#bugs` - Reportar problemas
  - `#funcionalidades` - Sugerir melhorias

#### üì± **Telegram**
- Grupo: [@rbac_mozambique](https://t.me/rbac_mozambique)
- Para discuss√µes r√°pidas e partilha de recursos

#### üìß **Email**
- Geral: comunidade@rbac-mozambique.co.mz
- T√©cnico: suporte@rbac-mozambique.co.mz
- Contribui√ß√µes: contribuicoes@rbac-mozambique.co.mz

### Eventos e Meetups

#### üè¢ **Maputo Tech Meetup**
- **Quando**: Primeira quinta-feira de cada m√™s
- **Onde**: Maputo, Mo√ßambique
- **T√≥picos**: Desenvolvimento, RBAC, Seguran√ßa

#### üíª **Beira Dev Conference**
- **Quando**: Anual (Setembro)
- **Onde**: Beira, Mo√ßambique
- **Foco**: Tecnologias emergentes, RBAC, Cloud

#### üåê **Eventos Online**
- **Webinars Mensais**: √öltima sexta-feira do m√™s
- **Workshops**: S√°bados alternados
- **Code Reviews**: Quartas-feiras

### Recursos de Aprendizagem

#### üìö **Documenta√ß√£o**
- [Guia do Iniciante](docs/GUIA_INICIANTE.md)
- [API Reference](docs/API_REFERENCE.md)
- [Exemplos Pr√°ticos](examples/)

#### üé• **V√≠deos**
- [Canal YouTube](https://youtube.com/rbac-mozambique)
- [Playlist: RBAC do Zero](https://youtube.com/playlist?list=...)
- [Tutoriais em Portugu√™s](https://youtube.com/playlist?list=...)

#### üìñ **Cursos**
- [Curso Online Gratuito](https://cursos.rbac-mozambique.co.mz)
- [Certifica√ß√£o RBAC](https://certificacao.rbac-mozambique.co.mz)
- [Mentoria 1:1](https://mentoria.rbac-mozambique.co.mz)

### Reconhecimento

#### üèÜ **Contribuidores do M√™s**
- **Janeiro 2024**: Jo√£o Silva (Maputo)
- **Fevereiro 2024**: Maria Santos (Beira)
- **Mar√ßo 2024**: Carlos M√°rio (Nampula)

#### üéñÔ∏è **Badges de Contribui√ß√£o**
- ü•â **Bronze**: 1-5 contribui√ß√µes
- ü•à **Prata**: 6-15 contribui√ß√µes
- ü•á **Ouro**: 16+ contribui√ß√µes
- üíé **Diamante**: Contribui√ß√µes excepcionais

### C√≥digo de Conduta

#### ü§ù **Nossa Comunidade**
- Seja respeitoso e inclusivo
- Use linguagem clara e construtiva
- Ajude outros desenvolvedores
- Partilhe conhecimento e experi√™ncias

#### üö´ **N√£o Permitido**
- Linguagem ofensiva ou discriminat√≥ria
- Spam ou conte√∫do irrelevante
- Compartilhar informa√ß√µes privadas
- Comportamento n√£o profissional

## Agradecimentos

Obrigado por contribuir para o sistema RBAC! Cada contribui√ß√£o, por menor que seja, ajuda a construir uma comunidade tecnol√≥gica mais forte em Mo√ßambique.

### Contribuidores Activos

- **Jo√£o Silva** (Maputo) - Core Developer
- **Maria Santos** (Beira) - Documentation Lead
- **Carlos M√°rio** (Nampula) - Testing Specialist
- **Ana Paula** (Quelimane) - UI/UX Designer
- **Pedro Jos√©** (Pemba) - DevOps Engineer

---

**Juntos, constru√≠mos o futuro da tecnologia em Mo√ßambique!** üá≤üáø

**Desenvolvido com ‚ù§Ô∏è pela comunidade de desenvolvedores mo√ßambicanos**
